# RI (Research Intelligence)

RI 是一个基于 Electron、React 和 TypeScript 构建的现代终端会话管理器。它旨在通过多会话管理、命令历史追踪、实时通知和统一的选项卡界面，帮助开发者高效组织工作流。

## 核心特性

### 基础管理
- **多终端会话**：创建并管理多个独立的终端进程。
- **统一选项卡系统**：所有的终端、历史记录、设置都在同一个选项卡栏中展示，带有清晰的类型前缀。
  - 终端：显示会话名称（如 "Session 1"）。
  - 历史：`[H]: 会话名称`。
  - 设置：`[S]: Settings`。
- **强健的进程管理**：在关闭会话或退出应用时，自动清理所有子进程（进程组），彻底告别僵尸进程。
- **会话持久化**：即使关闭选项卡，终端进程仍保持运行，随时可以重新开启。
- **拖拽排序**：支持通过拖拽自由调整选项卡的顺序。

### 视图与导航
- **侧边栏图标**：快速切换核心功能。
  - ⚡ 会话 (Sessions) - 管理终端。
  - 📜 历史 (History) - 查看命令日志。
  - 🔔 通知 (Notify) - 监控终端事件。
  - ⚙️ 工作流 (Flow) - 自动化任务（开发中）。
  - ⚙ 设置 (Settings) - 应用配置。
- **可折叠导航栏**：左侧面板可根据当前视图显示相关列表，支持折叠以节省空间。

### 终端功能
- **完整的终端模拟**：基于 xterm.js，支持自动适配窗口大小。
- **命令历史记录**：自动追踪并保存每个会话的命令执行日志。
- **AI 工具检测**：自动识别 AI 编程助手（如 OpenCode, Copilot, Aider, Cursor, Cline）的状态。
- **安全删除**：删除会话时提供上下文确认菜单，防止误删。

### 通知系统
- **桌面通知**：重要终端事件的即时提醒。
- **未读计数**：侧边栏图标显示未读通知总数。
- **Magic Strings**：支持通过特定的终端转义序列触发应用级通知。

### OpenCode 集成
- **自动启动**：应用启动时可自动开启 OpenCode 服务端和 Web 界面。
- **状态监控**：实时查看 PID、端口号和运行日志。

---

## 技术栈

- **前端**: React 18, TypeScript
- **桌面壳**: Electron 30
- **状态管理**: Zustand
- **终端引擎**: xterm.js
- **构建工具**: Vite 5
- **进程通讯**: node-pty

## 安装与开发

### 安装依赖
```bash
npm install
```

### 开发模式
```bash
npm run dev
```

### 生产构建
```bash
# 使用常规脚本
npm run build
# 或使用自动化构建脚本
./build-app.sh
```

### 清理残留进程
如果遇到进程残留，可以运行：
```bash
./cleanup-processes.sh
```

## 项目结构

```
.
├── electron/           # Electron 主进程代码
├── src/                # 渲染进程 (React) 代码
├── docs/               # 详细技术文档
├── PROCESS_CLEANUP.md  # 关于进程清理机制的说明
└── README.md           # 英文文档
```

## 许可证

本项目为私有项目，目前未获得公开发布许可。
