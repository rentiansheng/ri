# å¿«é€Ÿå¼€å§‹ï¼šè¿è¡Œ E2E æµ‹è¯•

## ğŸš€ ä¸‰ç§è¿è¡Œæ–¹å¼

### æ–¹å¼ 1ï¼šå®Œæ•´è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èç”¨äºé¦–æ¬¡è¿è¡Œï¼‰

```bash
# ä»¥ UI æ¨¡å¼è¿è¡Œï¼ˆå¯è§†åŒ–ï¼Œæ¨èï¼ï¼‰
./scripts/run-e2e-tests.sh --ui
```

**ä¼˜ç‚¹ï¼š**
- å¯è§†åŒ–ç•Œé¢ï¼Œèƒ½çœ‹åˆ°æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹
- è‡ªåŠ¨æ„å»ºåº”ç”¨
- è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š
- å¤±è´¥æ—¶è‡ªåŠ¨æˆªå›¾å’Œå½•åƒ
- æœ‰è¯¦ç»†çš„æ—¥å¿—è¾“å‡º

**å…¶ä»–é€‰é¡¹ï¼š**
```bash
# æ— å¤´æ¨¡å¼è¿è¡Œï¼ˆæ›´å¿«ï¼‰
./scripts/run-e2e-tests.sh

# æ˜¾ç¤º Electron çª—å£
./scripts/run-e2e-tests.sh --headed

# è°ƒè¯•æ¨¡å¼ï¼ˆå•æ­¥æ‰§è¡Œï¼‰
./scripts/run-e2e-tests.sh --debug

# åªè¿è¡Œç‰¹å®šæµ‹è¯•å¥—ä»¶
./scripts/run-e2e-tests.sh --specific session-management

# è·³è¿‡æ„å»ºï¼ˆä½¿ç”¨ç°æœ‰ buildï¼‰
./scripts/run-e2e-tests.sh --skip-build
```

---

### æ–¹å¼ 2ï¼šå¿«é€Ÿæµ‹è¯•ï¼ˆå•å…ƒæµ‹è¯• + E2Eï¼‰

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆå•å…ƒæµ‹è¯• + æ„å»º + E2E æµ‹è¯•ï¼‰
./scripts/quick-test.sh
```

**ç”¨é€”ï¼š**
- æäº¤ä»£ç å‰çš„å¿«é€ŸéªŒè¯
- ç¡®ä¿æ²¡æœ‰ç ´åä»»ä½•åŠŸèƒ½
- è‡ªåŠ¨æŒ‰é¡ºåºè¿è¡Œæ‰€æœ‰æµ‹è¯•

---

### æ–¹å¼ 3ï¼šç›´æ¥ä½¿ç”¨ npm å‘½ä»¤

```bash
# 1. å…ˆæ„å»ºåº”ç”¨ï¼ˆå¿…éœ€ï¼ï¼‰
npm run build

# 2. è¿è¡Œ E2E æµ‹è¯•
npm run test:e2e          # æ— å¤´æ¨¡å¼
npm run test:e2e:ui       # UI æ¨¡å¼ï¼ˆæ¨èï¼‰
npm run test:e2e:debug    # è°ƒè¯•æ¨¡å¼
```

---

## ğŸ“‹ æµ‹è¯•å¥—ä»¶è¯´æ˜

### å¯ç”¨çš„ E2E æµ‹è¯•å¥—ä»¶

| å¥—ä»¶åç§°              | æµ‹è¯•æ•° | è¯´æ˜                           |
|---------------------|--------|--------------------------------|
| `session-management`| 8      | ä¼šè¯åˆ›å»ºã€åˆ‡æ¢ã€é‡å‘½åã€åˆ é™¤    |
| `terminal-settings` | 9      | ç»ˆç«¯ä¸»é¢˜ã€å­—ä½“ã€è®¾ç½®æŒä¹…åŒ–      |
| `navigation-resize` | 9      | é¢æ¿å¤§å°è°ƒæ•´ã€å®½åº¦çº¦æŸ          |
| `tab-management`    | 11     | æ ‡ç­¾åˆ›å»ºã€åˆ‡æ¢ã€æ‹–æ”¾æ’åº        |

**æ€»è®¡ï¼š37 ä¸ª E2E æµ‹è¯•**

---

## ğŸ¯ æ¨èçš„æµ‹è¯•æµç¨‹

### é¦–æ¬¡è¿è¡Œï¼ˆå­¦ä¹ å’Œè°ƒè¯•ï¼‰

```bash
# 1. ä»¥ UI æ¨¡å¼è¿è¡Œï¼ˆèƒ½çœ‹åˆ°æµ‹è¯•è¿‡ç¨‹ï¼‰
./scripts/run-e2e-tests.sh --ui
```

åœ¨ Playwright UI ä¸­ï¼š
1. ç‚¹å‡»å·¦ä¾§çš„æµ‹è¯•æ–‡ä»¶
2. ç‚¹å‡» â–¶ï¸ è¿è¡ŒæŒ‰é’®
3. è§‚å¯Ÿæµ‹è¯•æ‰§è¡Œè¿‡ç¨‹
4. æŸ¥çœ‹é€šè¿‡/å¤±è´¥çŠ¶æ€
5. å¤±è´¥æ—¶æŸ¥çœ‹æˆªå›¾å’Œé”™è¯¯ä¿¡æ¯

### æ—¥å¸¸å¼€å‘

```bash
# å¿«é€ŸéªŒè¯æ‰€æœ‰åŠŸèƒ½
./scripts/quick-test.sh
```

### æäº¤ä»£ç å‰

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
npm run test:all

# æˆ–è€…å¸¦è¦†ç›–ç‡çš„ CI æ¨¡å¼
npm run test:ci
```

---

## ğŸ› å¦‚æœæµ‹è¯•å¤±è´¥

### 1. æŸ¥çœ‹è¯¦ç»†é”™è¯¯

è„šæœ¬ä¼šè‡ªåŠ¨æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶å‘Šè¯‰ä½ æˆªå›¾å’Œè§†é¢‘çš„ä½ç½®ã€‚

### 2. ä½¿ç”¨ UI æ¨¡å¼è°ƒè¯•

```bash
./scripts/run-e2e-tests.sh --ui
```

åœ¨ UI æ¨¡å¼ä¸‹ï¼Œä½ å¯ä»¥ï¼š
- çœ‹åˆ°æ¯ä¸€æ­¥çš„æ‰§è¡Œ
- æŸ¥çœ‹ DOM ç»“æ„
- æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
- å•æ­¥æ‰§è¡Œæµ‹è¯•

### 3. æŸ¥çœ‹å¤±è´¥æˆªå›¾

```bash
# æŸ¥çœ‹æˆªå›¾
open test-results/*.png

# æŸ¥çœ‹è§†é¢‘
open test-results/*.webm

# æŸ¥çœ‹ HTML æŠ¥å‘Š
npx playwright show-report
```

### 4. è¿è¡Œç‰¹å®šçš„æµ‹è¯•

```bash
# åªè¿è¡Œå¤±è´¥çš„é‚£ä¸ªæµ‹è¯•å¥—ä»¶
./scripts/run-e2e-tests.sh --specific session-management --ui
```

---

## ğŸ“Š æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š

### HTML æŠ¥å‘Šï¼ˆè‡ªåŠ¨æ‰“å¼€ï¼‰

è¿è¡Œæµ‹è¯•åï¼Œè„šæœ¬ä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ HTML æŠ¥å‘Šã€‚

**æ‰‹åŠ¨æ‰“å¼€æŠ¥å‘Šï¼š**
```bash
npx playwright show-report
```

æŠ¥å‘ŠåŒ…å«ï¼š
- æ¯ä¸ªæµ‹è¯•çš„æ‰§è¡Œæ—¶é—´
- é€šè¿‡/å¤±è´¥çŠ¶æ€
- å¤±è´¥æ—¶çš„æˆªå›¾
- å¤±è´¥æ—¶çš„è§†é¢‘å½•åƒ
- è¯¦ç»†çš„é”™è¯¯å †æ ˆ

### JSON ç»“æœ

```bash
# æŸ¥çœ‹ JSON æ ¼å¼çš„æµ‹è¯•ç»“æœ
cat test-results/results.json
```

### æ‰§è¡Œæ—¥å¿—

```bash
# æŸ¥çœ‹æœ€æ–°çš„æ‰§è¡Œæ—¥å¿—
ls -lt test-results/*.log | head -1 | xargs cat
```

---

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: è„šæœ¬æç¤º"æƒé™è¢«æ‹’ç»"

```bash
chmod +x scripts/run-e2e-tests.sh
chmod +x scripts/quick-test.sh
```

### Q: æµ‹è¯•è¶…æ—¶

å¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆåœ¨ `playwright.config.ts` ä¸­ï¼‰ï¼š
```typescript
timeout: 90 * 1000, // 90 ç§’
```

### Q: Electron çª—å£ä¸æ˜¾ç¤º

ä½¿ç”¨ `--headed` é€‰é¡¹ï¼š
```bash
./scripts/run-e2e-tests.sh --headed
```

### Q: å¦‚ä½•åªè¿è¡Œä¸€ä¸ªæµ‹è¯•ï¼Ÿ

```bash
# è¿è¡Œç‰¹å®šæµ‹è¯•å¥—ä»¶
./scripts/run-e2e-tests.sh --specific session-management

# è¿è¡ŒåŒ¹é…ç‰¹å®šåç§°çš„æµ‹è¯•
npx playwright test -g "should create a new session"
```

### Q: æµ‹è¯•å¾ˆæ…¢

E2E æµ‹è¯•æœ¬èº«å°±æ¯”è¾ƒæ…¢ï¼ˆ2-3 åˆ†é’Ÿï¼‰ï¼Œå› ä¸ºï¼š
- éœ€è¦å¯åŠ¨ Electron åº”ç”¨
- æ¯ä¸ªæµ‹è¯•éƒ½æ˜¯çœŸå®çš„ç”¨æˆ·äº¤äº’
- ä¸²è¡Œæ‰§è¡Œï¼ˆElectron é™åˆ¶ï¼‰

å¦‚æœåªæƒ³å¿«é€ŸéªŒè¯ï¼Œå¯ä»¥ï¼š
```bash
# åªè¿è¡Œå•å…ƒæµ‹è¯•ï¼ˆ2 ç§’ï¼‰
npm run test:unit

# åªè¿è¡Œä¸€ä¸ªæµ‹è¯•å¥—ä»¶ï¼ˆ20-30 ç§’ï¼‰
./scripts/run-e2e-tests.sh --specific session-management --skip-build
```

---

## ğŸ“ å­¦ä¹ æ›´å¤š

### è„šæœ¬è¯¦ç»†æ–‡æ¡£

```bash
# æŸ¥çœ‹å®Œæ•´æ–‡æ¡£
cat scripts/README.md

# æŸ¥çœ‹è„šæœ¬å¸®åŠ©
./scripts/run-e2e-tests.sh --help
```

### Playwright æ–‡æ¡£

- å®˜æ–¹æ–‡æ¡£: https://playwright.dev/docs/intro
- E2E æœ€ä½³å®è·µ: https://playwright.dev/docs/best-practices
- è°ƒè¯•æŒ‡å—: https://playwright.dev/docs/debug

---

## âœ… æˆåŠŸæ ‡å¿—

æµ‹è¯•æˆåŠŸæ—¶ï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
========================================
   All E2E tests passed! âœ¨
========================================

Next steps:
  - Review the HTML report for detailed results
  - Commit your changes if everything looks good
  - Push to GitHub to trigger CI/CD pipeline
```

æµ‹è¯•æŠ¥å‘Šä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œæ˜¾ç¤ºæ‰€æœ‰æµ‹è¯•çš„è¯¦ç»†ç»“æœã€‚

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹æµ‹è¯•å§ï¼**

```bash
./scripts/run-e2e-tests.sh --ui
```
